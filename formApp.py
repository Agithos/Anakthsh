from flask import Flask, render_template, request
from flask_ngrok import run_with_ngrok

result = {"answerList": [{'meta': {'answer': '<p>The Centre will have three major roles: supporting efforts on prevention, improving assistance to victims, and supporting the detection, reporting and removal of child sexual abuse online.</p>\n<p>The Centre will act as a hub of expertise on prevention. This will include raising awareness among children and parents/guardians, as well as efforts aimed at people who fear they may offend against children.</p>\n<p>The Centre will also pool expertise and research as regards support available to survivors. It will support victims in removing the materials depicting their abuse from the internet.</p>\n<p>The Centre will also help providers implement their obligations as regards the detection, reporting and removal of child sexual abuse online. It will facilitate access to reliable detection technologies to providers and will maintain a database of child sexual abuse indicators (hashes, AI patterns/classifiers) that will reliably enable the detection of what is defined as child sexual abuse according to EU rules. It will share those indicators with companies, providing clear information on what is illegal in the EU, instead of leaving service providers to rely on US definitions. The proposal therefore creates a proactive system, bringing all relevant service providers together to take action, reversing the current reactive system in which EU law enforcement is dependent on US law and voluntary actions by companies. The Centre will receive the reports from providers, check them to avoid false positives and forward them to Europol as well as to national law enforcement authorities.</p>\n<p>As the recipient of reports of child sexual abuse online the Centre will have an insight into the effectiveness of detection measures and will be able to ensure the transparency and accountability of the process.</p>',
   'country': 'Brussels',
   'date': '11 May 2022',
   'query': 'What will be the role and powers of the EU Centre to prevent and counter child sexual abuse?',
   'title': 'Questions and Answers –New rules to fight child sexual abuse'},
  'score': 0.6664499999999975},
 {'meta': {'answer': '<p>Depending on the timeline for the adoption and implementation of the proposed Regulation, the Centre should start its work in 2024-2026. The Centre will start operations with a focus on prevention and assistance to victims. It is expected to be fully operational by 2030 as preparation for the new detection, reporting and removal process, including the creation of the database of child sexual abuse indicators, should by then be complete.</p>',
   'country': 'Brussels',
   'date': '11 May 2022',
   'query': 'When will the EU Centre to prevent a1nd counter child sexual abuse be established?',
   'title': 'Questions and Answers –New rules to fight child sexual abuse'},
  'score': 0.6487999999999943},
 {'meta': {'answer': '<p>The internet has proven to be a great connector, including for children and especially throughout the pandemic. However, children may also be exposed to risks online, including when it comes to child sexual abuse. The past years have seen an overwhelming increase of sexual abuse online, both in sharing child sexual abuse material online, and in solicitation of children into sexually abusing themselves or even meeting perpetrators offline. According to <a href="https://www.europol.europa.eu/media-press/newsroom/news/exploiting-isolation-sexual-predators-increasingly-targeting-children-during-covid-pandemic">Europol\'s analysis</a>, in the first months of the COVID-19 crisis the demand for child sexual abuse material increased by up to 25% in some Member States. The <a href="https://edition.cnn.com/2020/05/25/us/child-abuse-online-coronavirus-pandemic-parents-investigations-trnd/index.html">US National Centre for Missing and Exploited Children</a> (NCMEC) also found that reports containing instances of child sexual abuse globally increased substantially, with NCMEC receiving almost 30 million reports of suspected child sexual exploitation in 2021, and with law enforcement being alerted to over 4000 new child victims. Reports of children subjected to grooming behaviour increased by more than 16% from 2020 to 2021. The circulation of pictures or videos picturing abuse among offenders re-victimises children and makes it difficult for them to find closure.</p>\n<p>Currently, certain online service providers detect online child sexual abuse on a voluntary basis. US service providers in fact supply the majority of reports that reach law enforcement, with NCMEC forwarding EU related reports to Europol and national law enforcement.</p>\n<p>While the measures taken by providers make an important contribution, they vary widely, with the vast majority of reports coming from a handful of providers, while a significant number take no action. Up to 95% of all reports of child sexual abuse received in 2020 came from one company, despite clear evidence that the problem does not only exist on one platform alone.</p>\n<p>Voluntary action is therefore insufficient to effectively address the misuse of online services for the purposes of child sexual abuse. A clear and binding legal framework is needed, with clear safeguards, to give providers legal certainty and ensure full respect for fundamental rights.</p>\n<p>Obliging service providers where necessary to detect, report and remove child sexual abuse will help rescue children from further abuse, prevent material from reappearing, and identify and prosecute offenders.</p>',
   'country': 'Brussels',
   'date': '11 May 2022',
   'query': 'Why are new rules needed?',
   'title': 'Questions and Answers –New rules to fight child sexual abuse'},
  'score': 0.6092199999999934},
 {'meta': {'answer': "<p>The proposal provides a uniform approach to detecting and reporting child sexual abuse, supports the work of public authorities and seeks to boost EU efforts on prevention and assistance to victims.</p>\n<p>It will:</p>\n<ul>\n<li><strong>Impose obligations on service providers to prevent child sexual abuse online by assessing and mitigating risks and, where needed, adopt targeted orders to detect, report and remove online child sexual abuse:</strong> The proposed rules introduce an obligation for relevant online service providers to assess the risk of their services' misuse for the dissemination of child sexual abuse materials or for the solicitation of children (“grooming”). Member States will need to designate national authorities in charge of reviewing the risk assessment and the mitigating measures proposed by the service provider to prevent child sexual abuse online. Where such authorities determine that a significant risk remains, they can ask a court or an independent administrative authority to issue a detection order for known or new child sexual abuse material or grooming to address any remaining significant risk in a targeted manner. Detection orders are limited in time, subject to strict procedural safeguards, and target a specific type of offence on a specific service. The intervention of data protection authorities is strengthened, building on the General Data Protection Regulation.</li>\n<li><strong>Introduce strong safeguards on detection:</strong> Companies having received a detection order will only be able to detect content using indicators to identify child sexual abuse, provided by the EU Centre, that have been created based on child sexual abuse online previously identified by relevant independent authorities or a court in the Member States. It is therefore not left to the provider to determine what is illegal in the EU. Detection technologies must only be used for the purpose of detecting child sexual abuse. Providers will have to deploy technologies that are the least privacy-intrusive in accordance with the state of the art in the industry, and that limit the error rate of false positives to the maximum extent possible.</li>\n<li>Create a new EU Agency to prevent and combat child sexual abuse: <strong>The EU Centre to prevent and combat child sexual abuse</strong> will maintain a database of indicators allowing the reliable identification of child sexual abuse materials and of solicitation of children as defined by EU rules. The EU Centre will also receive and process reports from providers of any child sexual abuse materials or solicitation of children detected on their services, and will share them with the competent law enforcement authorities and Europol, unless they are submitted in error. It will function as an important safeguard by preventing false positives from being reported to law enforcement, ensuring visibility on the effectiveness of detection measures, transparency and accountability of the process.</li>\n</ul>",
   'country': 'Brussuls',
   'date': '11 May 2023',
   'query': 'What are the key elements of the proposal?',
   'title': 'Questions and Answers –New rules2 to fight child sexual abuse'},
  'score': 0.5973999999999933},
 {'meta': {'answer': '<p>Prevention is key to combating child sexual abuse.</p>\n<p>The existing EU rules on combating the sexual abuse of children (Directive 2011/93) require Member States to invest in prevention programmes for convicted offenders and people who fear they may offend, and to put in place prevention activities through education and awareness raising.</p>\n<p>To help Member States implement these obligations fully and strengthen prevention, the Commission is creating a <a href="https://ec.europa.eu/home-affairs/networks/child-sexual-abuse-prevention-network-csapn_en">network of prevention experts</a>, as announced in the July 2020 <a href="https://ec.europa.eu/commission/presscorner/detail/en/ip_20_1380">Strategy</a> for a more effective fight against child sexual abuse. The network will foster communication and exchange of best practices between researchers and practitioners.</p>\n<p>The Commission\'s Joint Research Centre, in cooperation with the experts who may become part of the prevention network, has published a <a href="https://joint-research-centre.ec.europa.eu/jrc-news/classification-criteria-child-sexual-abuse-and-exploitation-prevention-programmes-2022-05-11_en">report </a>presenting classification criteria for prevention programmes across the EU.</p>\n<p>The EU is also working to improve the protection of children from sexual abuse globally by supporting and cooperating with the <a href="https://www.weprotect.org/">WeProtect Global Alliance</a>; and by providing <a href="https://ec.europa.eu/home-affairs/policies/internal-security/child-sexual-abuse/funding-support-fight-against-child-sexual-abuse_en">funding to projects</a> on prevention though the Internal Security Fund.</p>',
   'country': 'Brossels',
   'date': '11 May 2024',
   'query': 'What is being done to prevent child sexual abuse from happening in the first place?',
   'title': 'Questions and Answers –New rules3 to fight child sexual abuse'},
  'score': 0.5655800000000113}]}

app = Flask(__name__)
run_with_ngrok(app)


@app.route("/")
def home():
    return render_template("formApp.html")

@app.route("/<query>")
def queryResult(query):
    #trexe to piperun me to query
    return result

#@app.route("/rest/<query>")